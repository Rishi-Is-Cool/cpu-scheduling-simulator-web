<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU Scheduling Simulator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link external CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="p-4 md:p-8 min-h-screen">

    <div class="max-w-7xl mx-auto">
        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-6 text-center">
            CPU Scheduling Simulator
        </h1>
        <p class="text-center text-gray-500 mb-10">Define your processes and select an algorithm to run the simulation.</p>

        <!-- Main Grid Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Left Column: Controls and Initial Data -->
            <div class="lg:col-span-1 space-y-8">
                
                <!-- Algorithm Selection Card -->
                <div class="container-card bg-white p-6 rounded-xl">
                    <h2 class="text-2xl font-bold text-gray-700 mb-4">Simulation Controls</h2>
                    
                    <label for="algorithm" class="block text-sm font-medium text-gray-700 mb-2">Select Algorithm:</label>
                    <select id="algorithm" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150" onchange="toggleQuantumInput()">
                        <option value="FCFS">FCFS (First-Come, First-Served)</option>
                        <option value="SJF">SJF (Shortest Job First - Non-Preemptive)</option>
                        <option value="Priority">Priority (Non-Preemptive)</option>
                        <option value="RR">Round Robin</option>
                    </select>

                    <div id="quantum-group" class="mt-4 hidden">
                        <label for="quantum" class="block text-sm font-medium text-gray-700 mb-2">Time Quantum (for Round Robin):</label>
                        <input type="number" id="quantum" value="2" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150">
                    </div>

                    <button onclick="runSimulation()" class="mt-6 w-full py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-300 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50 active:bg-indigo-800">
                        Run Simulation
                    </button>
                </div>
                
                <!-- Dynamic Process Management Card -->
                <div class="container-card bg-white p-6 rounded-xl">
                    <h2 class="text-2xl font-bold text-gray-700 mb-4">Process Management</h2>
                    <div id="message-box" class="mb-4 hidden p-3 rounded-lg text-sm bg-red-100 text-red-700"></div>

                    <!-- Input Fields -->
                    <div id="process-input-form" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                        <div class="col-span-1">
                            <label for="input-arrival" class="block text-xs font-medium text-gray-700">Arrival Time (AT ≥ 0)</label>
                            <input type="number" id="input-arrival" value="0" min="0" class="w-full p-2 border rounded-lg focus:ring-emerald-500 focus:border-emerald-500">
                        </div>
                        <div class="col-span-1">
                            <label for="input-burst" class="block text-xs font-medium text-gray-700">Burst Time (BT ≥ 1)</label>
                            <input type="number" id="input-burst" value="5" min="1" class="w-full p-2 border rounded-lg focus:ring-emerald-500 focus:border-emerald-500">
                        </div>
                        <div class="col-span-1">
                            <label for="input-priority" class="block text-xs font-medium text-gray-700">Priority (Low # = High P)</label>
                            <input type="number" id="input-priority" value="1" min="1" class="w-full p-2 border rounded-lg focus:ring-emerald-500 focus:border-emerald-500">
                        </div>
                        <div class="col-span-1 flex items-end">
                            <button onclick="addProcess()" class="w-full py-2 px-3 bg-emerald-600 text-white font-semibold rounded-xl hover:bg-emerald-700 transition duration-300">
                                + Add Process
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center mt-4">
                        <p class="text-sm text-gray-500 font-medium">Defined Processes (<span id="process-count">0</span>):</p>
                        <button onclick="clearProcesses()" class="text-xs text-red-500 hover:text-red-700 font-medium transition duration-300">
                            Clear All
                        </button>
                    </div>
                    
                    <div id="process-list-table" class="overflow-x-auto mt-2">
                        <!-- Dynamic table populated by JS -->
                    </div>
                </div>
                
            </div>

            <!-- Right Column: Results and Visualization -->
            <div class="lg:col-span-2">
                <div id="results-container" class="space-y-8 bg-white p-6 rounded-xl container-card min-h-[500px]">
                    <h2 class="text-3xl font-bold text-gray-700 mb-4">Simulation Output</h2>
                    <p id="simulation-status" class="text-lg text-gray-500">Add processes and run the simulation...</p>

                    <!-- 1. Gantt Chart -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-4">Gantt Chart Visualization</h3>
                        <div id="gantt-chart-container" class="p-4 bg-gray-50 border border-gray-200 rounded-lg overflow-x-auto">
                            <!-- Gantt chart elements will be appended here -->
                        </div>
                    </div>

                    <!-- 2. Detailed Results Table -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-4">Detailed Process Results</h3>
                        <div id="results-table-container" class="overflow-x-auto">
                            <!-- Results table populated by JS -->
                        </div>
                    </div>

                    <!-- 3. Average Metrics Summary -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-4">Summary Metrics</h3>
                        <div id="summary-metrics" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <!-- Metrics cards populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Link external JS file -->
    <script src="script.js"></script>
</body>
</html>
